(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{577:function(e,t,a){"use strict";a.r(t);var o={mounted:function(){this.myLocation?(console.log("mylocation"),this.getClientDeviceLocation()):this.locationName?this.searchWeather(this.locationName):this.weatherData?this.processWeatherData(this.weatherData):this.geoCoords?this.getWeatherByGeoCoords(this.geoCoords):this.searchWeather("taunton")},components:{weathercurrent:function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,573))},weatherforecasted:function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,578))},googlemap:function(){return Promise.all([a.e(0),a.e(4),a.e(12)]).then(a.bind(null,579))},weathererror:function(){return a.e(9).then(a.bind(null,580))}},created:function(){},props:{myLocation:!1,locationName:null,geoCoords:null,weatherData:null,userLoggedIn:!1},data:function(){return{localWeatherData:null,userLoggedInStatus:this.$store.state.loggedInStatus||!1,onHomePage:!1,fetchWetherRoute:"/weather",error:!1,currentWeatherData:null,forecastedWeatherData:null}},watch:{locationName:function(e){this.searchWeather(e)}},methods:{processWeatherData:function(e){this.error=null,e.userWeatherData&&(this.onHomePage=e.userWeatherData.homepage),this.currentWeatherData=e.weatherData.current,this.forecastedWeatherData=e.weatherData.forecasted},getWeatherByGeoCoords:function(e){var t=this;axios.post("/weather/geo",{latitude:e[0],longitude:e[1]}).then((function(e){t.processWeatherData(e.data)})).catch((function(e){console.error(e)}))},searchWeather:function(e){var t=this;axios.post(this.fetchWetherRoute,{locationName:e}).then((function(e){t.processWeatherData(e.data)})).catch((function(e){t.error=!0}))},getClientDeviceLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.onLocationSuccess,this.onLocationError):alert("Error. Well that didnt go well")},onLocationSuccess:function(e){var t=[e.coords.latitude,e.coords.longitude];this.getWeatherByGeoCoords(t)},onLocationError:function(e){alert("Error "+e.code+". "+e.message)}}},r=a(11),n=a(18),s=a.n(n),i=a(571),c=a(582),h=a(572),u=Object(r.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.error?e._e():a("div",[a("weathercurrent",{attrs:{currentWeatherData:e.currentWeatherData,onUsersHome:e.onHomePage,userLoggedIn:e.userLoggedInStatus}}),e._v(" "),a("v-tabs",{attrs:{centered:""}},[a("v-tab",[e._v("5 Day forecast")]),e._v(" "),a("v-tab",[e._v("Map")]),e._v(" "),a("v-tab-item",[a("weatherforecasted",{attrs:{forecastedWeatherData:e.forecastedWeatherData}})],1),e._v(" "),a("v-tab-item",[a("googlemap",{attrs:{geoCoords:e.currentWeatherData.coordinates}})],1)],1)],1),e._v(" "),e.error?a("weathererror"):e._e()],1)}),[],!1,null,null,null);t.default=u.exports;s()(u,{VTab:i.a,VTabItem:c.a,VTabs:h.a})}}]);